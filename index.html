<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üíå A Little Valentine For You</title>

  <style>
    :root{
      --bg:#0b0b12;
      --card:#151525;
      --text:#f5f5ff;
      --muted:#b9b9d6;
      --accent:#ff4d8d;
      --accent2:#7c5cff;
      color-scheme: dark; /* Safari hint */
    }
    html, body { color-scheme: dark; }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      min-height:100vh;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: var(--text);
      background:
        radial-gradient(900px 500px at 20% 10%, rgba(255,77,141,.25), transparent 60%),
        radial-gradient(900px 500px at 80% 20%, rgba(124,92,255,.25), transparent 60%),
        linear-gradient(180deg, #07070d, #0b0b12);
      display:grid;
      place-items:center;
      padding:24px;
    }

    .wrap{ width:min(860px, 100%); }
    .top{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:16px;
      margin-bottom:16px;
    }
    .badge{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:10px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      color: var(--muted);
      font-size:13px;
    }

    .card{
      background: rgba(21,21,37,.85);
      border:1px solid rgba(255,255,255,.12);
      border-radius:18px;
      box-shadow: 0 12px 40px rgba(0,0,0,.35);
      overflow:hidden;
    }

    .hero{
      padding:26px 22px 18px;
      background:
        radial-gradient(600px 240px at 20% 20%, rgba(255,77,141,.30), transparent 60%),
        radial-gradient(600px 240px at 80% 10%, rgba(124,92,255,.25), transparent 60%);
      border-bottom:1px solid rgba(255,255,255,.10);
    }

    h1{ margin:0 0 8px; font-size: clamp(22px, 3.2vw, 34px); }
    p{ margin:0; color: var(--muted); line-height:1.5; }

    .content{ padding:18px 22px 22px; }

    .row{ display:flex; gap:12px; flex-wrap:wrap; }
    label{ display:block; font-size:13px; color: var(--muted); margin: 10px 0 6px; }

    input[type="text"], textarea, select{
      width:100%;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      outline:none;
      -webkit-appearance: none;
      appearance: none;
    }

    /* Safari dropdown readability */
    select{
      background-color: rgba(255,255,255,.08) !important;
      color: #f5f5ff !important;
    }
    option, optgroup{
      background-color:#151525 !important;
      color:#f5f5ff !important;
    }
    select:focus, input:focus, textarea:focus{
      outline: 2px solid rgba(255,77,141,.55);
      outline-offset: 2px;
    }

    textarea{ min-height: 96px; resize: vertical; }

    .q{
      padding:14px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      margin-top:14px;
    }
    .qtitle{ font-weight:650; margin:0 0 4px; }
    .qsub{ margin:0 0 10px; font-size:13px; color: var(--muted); }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:16px;
    }
    button{
      border:0;
      padding:12px 14px;
      border-radius:12px;
      color:white;
      cursor:pointer;
      font-weight:650;
    }
    .primary{ background: linear-gradient(90deg, var(--accent), #ff7aa9); }
    .secondary{ background: rgba(255,255,255,.10); }
    .ghost{ background: transparent; border: 1px solid rgba(255,255,255,.18); }
    button:disabled{ opacity:.55; cursor:not-allowed; }

    .progress{
      height:10px;
      background: rgba(255,255,255,.08);
      border-radius:999px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      transition: width .35s ease;
    }
    .small{ font-size:12px; color: var(--muted); margin-top:8px; }
    .hidden{ display:none; }

    /* Choice cards (Safari-proof) */
    .choices{ display:grid; gap:10px; margin-top:10px; }
    .choice{
      display:flex;
      align-items:center;
      gap:10px;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      cursor:pointer;
      user-select:none;
    }
    .choice:hover{ background: rgba(255,255,255,.09); }
    .choice input{
      width:18px;
      height:18px;
      accent-color: var(--accent);
      flex: 0 0 auto;
    }

    .final{
      padding: 18px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(600px 240px at 20% 20%, rgba(255,77,141,.20), transparent 60%),
        radial-gradient(600px 240px at 80% 10%, rgba(124,92,255,.18), transparent 60%),
        rgba(255,255,255,.03);
      margin-top: 16px;
    }
    .copybox{
      margin-top:12px;
      padding:12px;
      border-radius:12px;
      background: rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.10);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono";
      font-size:12px;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .footer{
      margin-top:14px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      color: rgba(255,255,255,.45);
      font-size:12px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="badge">üíó Valentine Mini-Site</div>
      <div class="badge" id="saveStatus">Saved: not yet</div>
    </div>

    <div class="card">
      <div class="hero">
        <h1 id="title">Hi my love üíå</h1>
        <p id="subtitle">I made you a tiny page with a few questions. Answer them and unlock a little surprise at the end.</p>
        <div style="margin-top:14px" class="progress" aria-label="Progress">
          <div class="bar" id="bar"></div>
        </div>
        <div class="small" id="stepText">Step 1 of 6</div>
      </div>

      <div class="content">
        <!-- Step 1 -->
        <section class="step" data-step="1">
          <div class="row">
            <div style="flex:1 1 240px">
              <label>Your name</label>
              <input id="herName" type="text" placeholder="Type your name" />
            </div>
            <div style="flex:1 1 240px">
              <label>Today‚Äôs vibe</label>
              <select id="vibe">
                <option value="">Pick one</option>
                <option>Soft & cozy</option>
                <option>Chaotic cute</option>
                <option>Romantic mood</option>
                <option>Laughing all day</option>
                <option>Missing you</option>
              </select>
            </div>
          </div>

          <div class="q">
            <div class="qtitle">Quick promise ü§ù</div>
            <p class="qsub">Answer honestly (and cutely if possible). No wrong answers.</p>
            <label style="margin-top:8px">
              <input id="promise" type="checkbox" style="accent-color: var(--accent);" />
              I promise üòå
            </label>
          </div>
        </section>

        <!-- Step 2 -->
        <section class="step hidden" data-step="2">
          <div class="q">
            <div class="qtitle">1) Pick our cutest memory</div>
            <p class="qsub">Choose one (you can tell me the full story later üò≠)</p>

            <div class="choices">
              <label class="choice"><input type="radio" name="memory" value="Our first proper date"> Our first proper date</label>
              <label class="choice"><input type="radio" name="memory" value="That time we laughed non-stop"> That time we laughed non-stop</label>
              <label class="choice"><input type="radio" name="memory" value="A simple moment that felt perfect"> A simple moment that felt perfect</label>
              <label class="choice"><input type="radio" name="memory" value="A surprise / unexpected moment"> A surprise / unexpected moment</label>
              <label class="choice"><input type="radio" name="memory" value="Other (I‚Äôll tell you later)"> Other (I‚Äôll tell you later)</label>
            </div>
          </div>
        </section>

        <!-- Step 3 -->
        <section class="step hidden" data-step="3">
          <div class="q">
            <div class="qtitle">2) When you think of me, what‚Äôs the first word?</div>
            <p class="qsub">Pick one üòå</p>

            <select id="q2">
              <option value="">Pick one</option>
              <option>Home</option>
              <option>Peace</option>
              <option>Comfort</option>
              <option>Funny</option>
              <option>Safe</option>
              <option>Love</option>
              <option>Best</option>
              <option>Crazy (in a good way)</option>
            </select>
          </div>
        </section>

        <!-- Step 4 -->
        <section class="step hidden" data-step="4">
          <div class="q">
            <div class="qtitle">3) Choose our next date idea</div>
            <p class="qsub">Pick one ‚Äî we‚Äôll do it soon.</p>

            <div class="choices" id="dateChoices">
              <label class="choice"><input type="radio" name="dateIdea" value="Food + long talk"> Food + long talk</label>
              <label class="choice"><input type="radio" name="dateIdea" value="Movie night + snacks"> Movie night + snacks</label>
              <label class="choice"><input type="radio" name="dateIdea" value="Picnic / sunset"> Picnic / sunset</label>
              <label class="choice"><input type="radio" name="dateIdea" value="Game night (I‚Äôll lose on purpose)"> Game night (I‚Äôll lose on purpose)</label>
              <label class="choice"><input type="radio" name="dateIdea" value="Surprise date (you choose everything)"> Surprise date (you choose everything)</label>
            </div>
          </div>
        </section>

        <!-- Step 5 -->
        <section class="step hidden" data-step="5">
          <div class="q">
            <div class="qtitle">4) One thing you want more of from me</div>
            <p class="qsub">Choose as many as you want.</p>

            <div class="choices">
              <label class="choice"><input type="checkbox" name="moreOf" value="More time together"> More time together</label>
              <label class="choice"><input type="checkbox" name="moreOf" value="More communication"> More communication</label>
              <label class="choice"><input type="checkbox" name="moreOf" value="More reassurance"> More reassurance</label>
              <label class="choice"><input type="checkbox" name="moreOf" value="More surprise dates"> More surprise dates</label>
              <label class="choice"><input type="checkbox" name="moreOf" value="More hugs / affection"> More hugs / affection</label>
              <label class="choice"><input type="checkbox" name="moreOf" value="More jokes (don‚Äôt judge me)"> More jokes (don‚Äôt judge me)</label>
            </div>
          </div>

          <div class="q">
            <div class="qtitle">Bonus: Pick a ‚Äúkiss level‚Äù üò≥</div>
            <p class="qsub">This is important research.</p>

            <div class="choices">
              <label class="choice"><input type="radio" name="kiss" value="1" /> 1 ‚Äî shy</label>
              <label class="choice"><input type="radio" name="kiss" value="2" /> 2 ‚Äî cute</label>
              <label class="choice"><input type="radio" name="kiss" value="3" /> 3 ‚Äî dangerous</label>
              <label class="choice"><input type="radio" name="kiss" value="4" /> 4 ‚Äî criminal</label>
            </div>
          </div>
        </section>

        <!-- Step 6 -->
        <section class="step hidden" data-step="6">
          <div class="final">
            <h2 style="margin:0 0 8px">Unlocked ‚ú®</h2>
            <p id="finalMsg" style="margin:0 0 8px"></p>
            <p style="margin:0; color: var(--muted);">Copy the summary below and send it back to me üíó</p>

            <div class="copybox" id="summary"></div>

            <div class="actions">
              <button class="primary" id="copyBtn">Copy summary</button>
              <button class="secondary" id="restartBtn">Restart</button>
              <button class="ghost" id="downloadBtn">Download my answers (.txt)</button>
            </div>
          </div>
        </section>

        <div class="actions">
          <button class="secondary" id="backBtn">Back</button>
          <button class="primary" id="nextBtn">Next</button>
          <button class="ghost" id="saveBtn">Save now</button>
        </div>

        <div class="footer">
          <div>Tip: Works on Safari (iPhone) + Chrome. Answers save on device.</div>
          <div id="hint"></div>
        </div>
      </div>
    </div>
  </div>

<script>
  // ====== Customize these two lines ======
  const YOUR_NAME = "Shenal";      // your name
  const HER_NICKNAME = "My Baby G Imaya!";  // fallback if she doesn't type her name
  // ======================================

  const steps = Array.from(document.querySelectorAll(".step"));
  const bar = document.getElementById("bar");
  const stepText = document.getElementById("stepText");
  const title = document.getElementById("title");
  const subtitle = document.getElementById("subtitle");
  const hint = document.getElementById("hint");
  const saveStatus = document.getElementById("saveStatus");

  const backBtn = document.getElementById("backBtn");
  const nextBtn = document.getElementById("nextBtn");
  const saveBtn = document.getElementById("saveBtn");

  const herName = document.getElementById("herName");
  const vibe = document.getElementById("vibe");
  const promise = document.getElementById("promise");
  const q2 = document.getElementById("q2");

  const finalMsg = document.getElementById("finalMsg");
  const summaryBox = document.getElementById("summary");
  const copyBtn = document.getElementById("copyBtn");
  const restartBtn = document.getElementById("restartBtn");
  const downloadBtn = document.getElementById("downloadBtn");

  const STORAGE_KEY = "valentine_mini_site_v2_select";

  let current = 1;

  function getRadioValue(name) {
    const r = document.querySelector(`input[name="${name}"]:checked`);
    return r ? r.value : "";
  }

  function setRadioValue(name, val) {
    const r = document.querySelector(`input[name="${name}"][value="${val}"]`);
    if (r) r.checked = true;
  }

  function getCheckboxValues(name) {
    return Array.from(document.querySelectorAll(`input[name="${name}"]:checked`)).map(x => x.value);
  }

  function setCheckboxValues(name, vals) {
    const set = new Set(vals || []);
    document.querySelectorAll(`input[name="${name}"]`).forEach(cb => {
      cb.checked = set.has(cb.value);
    });
  }

  function updateHeader() {
    const percent = ((current - 1) / (steps.length - 1)) * 100;
    bar.style.width = `${percent}%`;
    stepText.textContent = `Step ${current} of ${steps.length}`;

    const name = (herName.value || HER_NICKNAME).trim();
    title.textContent = `Hi ${name} üíå`;

    const vibeText = vibe.value ? `Today‚Äôs vibe: ${vibe.value}.` : "";
    subtitle.textContent =
      `I made you a tiny page with a few questions. Answer them and unlock a little surprise at the end. ${vibeText}`.trim();

    const hints = {
      1: "Tick the promise box to continue üòâ",
      2: "Pick a memory‚Ä¶ no pressure ü•∫",
      3: "Pick one word üòå",
      4: "Choose wisely‚Ä¶ it‚Äôs a contract üòÇ",
      5: "Pick at least one + kiss level üò≥",
      6: "Send me the summary üíó"
    };
    hint.textContent = hints[current] || "";
  }

  function showStep(n) {
    steps.forEach(s => s.classList.add("hidden"));
    const target = steps.find(s => Number(s.dataset.step) === n);
    if (target) target.classList.remove("hidden");

    backBtn.disabled = (n === 1);
    nextBtn.textContent = (n === steps.length) ? "Done" : "Next";

    updateHeader();
    validate();
  }

  function validate() {
    let ok = true;

    if (current === 1) {
      ok = promise.checked;
    } else if (current === 2) {
      ok = getRadioValue("memory") !== "";
    } else if (current === 3) {
      ok = q2.value !== "";
    } else if (current === 4) {
      ok = getRadioValue("dateIdea") !== "";
    } else if (current === 5) {
      ok = getCheckboxValues("moreOf").length >= 1 && getRadioValue("kiss") !== "";
    }

    nextBtn.disabled = !ok;
    return ok;
  }

  function collectData() {
    return {
      herName: herName.value.trim(),
      vibe: vibe.value,
      promise: promise.checked,
      memory: getRadioValue("memory"),
      q2: q2.value,
      dateIdea: getRadioValue("dateIdea"),
      moreOf: getCheckboxValues("moreOf"),
      kiss: getRadioValue("kiss")
    };
  }

  function buildSummary() {
    const data = collectData();
    const now = new Date();
    const when = now.toLocaleString();

    const kissMap = { "1":"shy", "2":"cute", "3":"dangerous", "4":"criminal" };

    return (
`üíå Valentine Answers (${when})
Name: ${data.herName || "(not said)"}
Vibe: ${data.vibe || "(not picked)"}

1) Cutest memory:
${data.memory || "-"}

2) First word for you:
${data.q2 || "-"}

3) Next date idea:
${data.dateIdea || "-"}

4) Wants more of:
${(data.moreOf && data.moreOf.length) ? data.moreOf.join(", ") : "-"}

Bonus kiss level:
${data.kiss ? `${data.kiss} ‚Äî ${kissMap[data.kiss]}` : "-"}

(Reply this to ${YOUR_NAME} üíó)`
    );
  }

  function updateFinal() {
    const name = (herName.value || HER_NICKNAME).trim();
    const word = q2.value || "everything";
    const date = getRadioValue("dateIdea") || "a date";

    finalMsg.textContent =
      `${name}, thank you for answering ü•∫üíó. You picked ‚Äú${word}‚Äù for me‚Ä¶ and I‚Äôm smiling like an idiot. Our next plan is: ${date}.`;

    summaryBox.textContent = buildSummary();
  }

  function save() {
    const payload = { current, data: collectData(), savedAt: Date.now() };
    localStorage.setItem(STORAGE_KEY, JSON.stringify(payload));
    const d = new Date(payload.savedAt);
    saveStatus.textContent = `Saved: ${d.toLocaleTimeString()}`;
  }

  function load() {
    const raw = localStorage.getItem(STORAGE_KEY);
    if (!raw) return;

    try {
      const payload = JSON.parse(raw);
      const d = payload.data || {};
      current = payload.current || 1;

      herName.value = d.herName || "";
      vibe.value = d.vibe || "";
      promise.checked = !!d.promise;

      setRadioValue("memory", d.memory || "");
      q2.value = d.q2 || "";
      setRadioValue("dateIdea", d.dateIdea || "");
      setCheckboxValues("moreOf", d.moreOf || []);
      setRadioValue("kiss", d.kiss || "");

      if (payload.savedAt) {
        const t = new Date(payload.savedAt);
        saveStatus.textContent = `Saved: ${t.toLocaleTimeString()}`;
      }
    } catch (_) {}
  }

  function clearAll() {
    localStorage.removeItem(STORAGE_KEY);

    herName.value = "";
    vibe.value = "";
    promise.checked = false;

    document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
    document.querySelectorAll('input[type="checkbox"]').forEach(c => c.checked = false);
    q2.value = "";

    current = 1;
    saveStatus.textContent = "Saved: not yet";
  }

  // Validate on changes
  document.addEventListener("input", () => validate());
  document.addEventListener("change", () => validate());

  backBtn.addEventListener("click", () => {
    if (current > 1) { current--; showStep(current); save(); }
  });

  nextBtn.addEventListener("click", () => {
    if (!validate()) return;

    if (current < steps.length) {
      current++;
      if (current === steps.length) updateFinal();
      showStep(current);
      save();
    }
  });

  saveBtn.addEventListener("click", save);

  copyBtn.addEventListener("click", async () => {
    try {
      await navigator.clipboard.writeText(summaryBox.textContent);
      copyBtn.textContent = "Copied ‚úÖ";
      setTimeout(() => copyBtn.textContent = "Copy summary", 1200);
    } catch {
      alert("Copy failed. You can manually select and copy the text.");
    }
  });

  restartBtn.addEventListener("click", () => {
    clearAll();
    showStep(current);
  });

  downloadBtn.addEventListener("click", () => {
    const text = summaryBox.textContent;
    const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "valentine_answers.txt";
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(a.href);
  });

  // Init
  load();
  showStep(current);
</script>
</body>
</html>

